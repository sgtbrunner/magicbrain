(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/brain.7467e8cb.png"},31:function(e,t,a){e.exports=a(59)},36:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),c=a.n(i),o=a(10),l=(a(36),a(1)),s=a(4),u=a(3),m=a(25),d=a.n(m),b=function(e){var t=e.onClick,a=e.children;return r.a.createElement("button",{className:"f4 link black pv2 ma3 b--none bg-transparent",onClick:t,type:"button"},a)},p=function(e){var t=e.isUserSignedIn,a=e.clearUser,n=Object(u.g)(),i=function(){return n.push("/signin")};return r.a.createElement("nav",{className:"flex justify-end"},t?r.a.createElement(b,{onClick:function(){a(),localStorage.clear(),i()}},"Sign Out"):r.a.createElement("div",null,r.a.createElement(b,{onClick:i},"Sign In"),r.a.createElement(b,{onClick:function(){return n.push("/register")}},"Register")))},f=a(18),h=a.n(f),g=a(27),v=a(28),E=a.n(v),j=function(e){var t=e.error;return r.a.createElement("p",{className:"red f6 mv3 pa3 right-0 left-0 b bg-light-pink ba b--red br2",role:"alert"},t)},O=(a(53),function(e){var t=e.box,a=e.error,n=e.imageUrl,i=e.loading;return r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"absolute mt2"},r.a.createElement("div",{className:"mb2"},r.a.createElement(E.a,{active:i,spinner:!0},!a&&r.a.createElement("img",{id:"input-image",alt:"",src:n,width:"460"}),r.a.createElement("div",{"data-testid":"face-location",className:"bounding-box",style:{top:t.topRow,right:t.rightCol,bottom:t.bottomRow,left:t.leftCol}}))),a&&r.a.createElement(j,{error:a})))});O.defaultProps={box:{},error:null};var w=O,y=(a(54),function(e){var t=e.onFormSubmit,a=Object(n.useState)(""),i=Object(s.a)(a,2),c=i[0],o=i[1];return r.a.createElement("label",{className:"f3",htmlFor:"image-link-form"},"The ",r.a.createElement("b",null,"MagicBrain")," will detect faces in your pictures. Give it a try!",r.a.createElement("form",{className:"pa4 br3 mt3 custom-shadow-w form smaller center",id:"image-link-form","data-testid":"image-link-form",onSubmit:function(e){e.preventDefault(),t(c)}},r.a.createElement("input",{className:"f4 pa2 w-70 ba",type:"text",placeholder:"enter the image URL here",onChange:function(e){o(e.target.value)}}),r.a.createElement("button",{className:"w-30 f4 link ph3 pv2 dib light bg-light-purple noselect",type:"submit",disabled:!c},"Detect")))}),N=a(29),S=a.n(N),k=(a(55),a(30)),x=a.n(k),U=function(){return r.a.createElement("div",{className:"ma4 mt0 tiltbox centered"},r.a.createElement(S.a,{className:"Tilt shadow-2",options:{max:100},style:{height:130,width:130}},r.a.createElement("div",{className:"Tilt-inner pa4 tiltbox"},r.a.createElement("img",{className:"noselect",src:x.a,alt:"logo"}))))},C=function(e){var t=e.name,a=e.entries;return r.a.createElement("div",null,r.a.createElement("div",{className:"white f4"},"Hello ".concat(t,", your current entry count is...")),r.a.createElement("div",{className:"white f2","data-testid":"user-entries"},a))},T=function(e){var t=e.path,a=e.method,n=void 0===a?"POST":a,r=e.headers,i=void 0===r?{"Content-Type":"application/json"}:r,c=e.body;return fetch("".concat("https://mighty-beyond-04256.herokuapp.com").concat(t),{method:n,headers:i,body:JSON.stringify(Object(l.a)({},c))})},I={signInUser:function(e){var t=e.email,a=e.password;return T({path:"/signin",body:{email:t,password:a}}).then(function(e){return e.json()})},registerUser:function(e){var t=e.name,a=e.email,n=e.password;return T({path:"/register",body:{name:t,email:a,password:n}}).then(function(e){return e.json()})},getImageBoundary:function(e){var t=e.input;return T({path:"/imageurl",body:{input:t}}).then(function(e){return e.json()})},updateImageCount:function(e){var t=e.id;return T({path:"/image",method:"PUT",body:{id:t}}).then(function(e){return e.json()})}},F=function(e){return localStorage.setItem("user",JSON.stringify(e))},B=function(e){return e[0].toUpperCase()+e.slice(1)},P={},_=function(e){var t=e.user,a=e.setUser,c=Object(n.useState)(P),o=Object(s.a)(c,2),u=o[0],m=o[1],d=Object(n.useState)(""),b=Object(s.a)(d,2),p=b[0],f=b[1],v=Object(n.useState)(null),E=Object(s.a)(v,2),j=E[0],O=E[1],N=Object(n.useState)(!1),S=Object(s.a)(N,2),k=S[0],x=S[1],T=t.id,B=t.name,_=t.entries,R=function(e){var t=e.outputs[0].data.regions[0].region_info.bounding_box,a=document.getElementById("input-image"),n=Number(a.width),r=Number(a.height);return{leftCol:t.left_col*n,topRow:t.top_row*r,rightCol:n-t.right_col*n,bottomRow:r-t.bottom_row*r}},V=function(){var e=Object(g.a)(h.a.mark(function e(n){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(i.unstable_batchedUpdates)(function(){j&&O(null),x(!0),m(P),f(n)}),e.next=3,I.getImageBoundary({input:n}).then(function(e){e.outputs?I.updateImageCount({id:T}).then(function(n){if(n.count){var r=Object(l.a)(Object(l.a)({},t),{},{entries:Number(n.count)});a(r),F(r);var i=R(e);m(Object(l.a)({},i))}else O(n.error)}):O(e.error)}).catch(function(){return O("Something went wrong. Please try again later.")});case 3:x(!1);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C,{name:B,entries:_}),r.a.createElement(U,null),r.a.createElement(y,{onFormSubmit:V}),p&&r.a.createElement(w,{box:u,error:j,imageUrl:p,loading:k}))},R=(a(56),function(){var e=Object(u.g)();return r.a.createElement("div",{className:"f3 fw6 pt6 pr6 pl6 black-80"},r.a.createElement("h1",null,"Oooooppssss......."),r.a.createElement("h3",null,"You were not supposed to see this!"),r.a.createElement("h5",null,"Click"," ",r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){return e.push("/")}},"here")," ","to go back"))}),V={particles:{number:{value:50,density:{enable:!0,value_area:500}}}},D={value:"",isValid:!1,errorText:"",showError:!1},J=/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i,Y=a(12),L=function(e){var t=e.children,a=e.isValidForm,n=e.disabled,i=function(e){return e?"b bg-lightest-blue grow":""}(a);return r.a.createElement("button",{className:"ph3 pv2 mt3 ba b--black f6 dib ".concat(i),type:"submit",disabled:n},t)};L.defaultProps={isValidForm:!1,disabled:!1};var A=L,G=function(e){var t=e.name,a=e.type,n=e.errorData,i=e.isTopInput,c=e.onChange,o=e.onBlur,l=n.errorText,s=n.showError;return r.a.createElement("div",{className:i?"":"mt4","data-testid":"form-input"},r.a.createElement("label",{className:"db fw6 lh-copy mv2",htmlFor:t},B(t),r.a.createElement("input",{"data-testid":"".concat(t,"-input"),className:"pa2 mb0 ba bg-white w-100 br2 ".concat(function(){return s?"b--red":""}),type:a,name:t,id:t,onChange:function(e){return c(t,e)},onBlur:function(){return o(t)}}),s&&r.a.createElement("p",{className:"red f6 absolute mv0 right-0 left-0",role:"alert"},l)))};G.defaultProps={type:"text",onChange:function(){},onBlur:function(){},isTopInput:!1};var H=G,M=function(e){var t=e.fields,a=e.type,i=e.loadUser,c="sign in"===a,o=Object(u.g)(),m=Object(n.useState)(null),d=Object(s.a)(m,2),b=d[0],p=d[1],f=Object.values(t),h=f.every(function(e){return e.isValid}),g=function(e,a){var n=t[e],r=function(e,t){return{name:t.length>0,email:J.test(String(t).toLowerCase()),password:t.length>=6}[e]}(e,a.target.value);t[e].setField(Object(l.a)(Object(l.a)({},n),{},{value:a.target.value,isValid:r,showError:n.showError&&!r}))},v=function(e){var a=t[e];t[e].setField(Object(l.a)(Object(l.a)({},a),{},{showError:!a.isValid}))};return r.a.createElement("form",{className:"br3 ba b--black-10 mv4 mw6 shadow-5 center smaller",onSubmit:function(e){e.preventDefault();var t=f.reduce(function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(Y.a)({},t.name,t.value))},{});(c?I.signInUser:I.registerUser)(t).then(function(e){(null===e||void 0===e?void 0:e.id)?(i(e),F(e)):p(e.error)}).catch(function(){return p("Something went wrong. Please try again later.")})},"data-testid":"user-form"},r.a.createElement("main",{className:"pv3 ph4 black-80"},r.a.createElement("fieldset",{id:"sign-in",className:"ba b--transparent ph0 mh0"},r.a.createElement("h2",{className:"f2 ph0 ma0 noselect"},B(a)),b&&r.a.createElement(j,{error:b}),f.map(function(e){var t=e.name,a=e.id,n=e.type,i=e.showError,c=e.errorText;return r.a.createElement(H,{key:a,name:t,type:n,errorData:{showError:i,errorText:c},isTopInput:1===a,onChange:g,onBlur:v})})),r.a.createElement("div",{className:"flex flex-column items-center"},r.a.createElement(A,{isValidForm:h,disabled:!h},B(a)),c&&r.a.createElement("button",{className:"f5 dim black lh-copy mt3 link b--none bg-transparent",type:"button",onClick:function(){return o.push("/register")}},"Register now, it's free!"))))},$=function(e){var t=e.loadUser,a=Object(n.useState)(Object(l.a)(Object(l.a)({},D),{},{errorText:"Name cannot be empty"})),i=Object(s.a)(a,2),c=i[0],o=i[1],u=Object(n.useState)(Object(l.a)(Object(l.a)({},D),{},{errorText:"Please enter a valid email address"})),m=Object(s.a)(u,2),d=m[0],b=m[1],p=Object(n.useState)(Object(l.a)(Object(l.a)({},D),{},{errorText:"Your password must be at least 6 characters long"})),f=Object(s.a)(p,2),h=f[0],g=f[1],v={name:Object(l.a)(Object(l.a)({id:1,name:"name"},c),{},{type:"text",setField:o}),email:Object(l.a)(Object(l.a)({id:2,name:"email"},d),{},{type:"email",setField:b}),password:Object(l.a)(Object(l.a)({id:3,name:"password"},h),{},{type:"password",setField:g})};return r.a.createElement(M,{fields:v,type:"register",loadUser:t})},q=function(e){var t=e.loadUser,a=Object(n.useState)(Object(l.a)(Object(l.a)({},D),{},{errorText:"Please enter a valid email address"})),i=Object(s.a)(a,2),c=i[0],o=i[1],u=Object(n.useState)(Object(l.a)(Object(l.a)({},D),{},{errorText:"Your password must be at least 6 characters long"})),m=Object(s.a)(u,2),d=m[0],b=m[1],p={email:Object(l.a)(Object(l.a)({id:1,name:"email"},c),{},{type:"email",setField:o}),password:Object(l.a)(Object(l.a)({id:2,name:"password"},d),{},{type:"password",setField:b})};return r.a.createElement(M,{fields:p,type:"sign in",loadUser:t})},z=(a(57),a(58),{id:0,name:"",email:"",entries:0,joined:""}),K=function(){var e=Object(n.useState)(z),t=Object(s.a)(e,2),a=t[0],i=t[1],c=Object(u.g)();Object(n.useEffect)(function(){var e=localStorage.getItem("user");if(e){var t=JSON.parse(e);i(Object(l.a)(Object(l.a)({},t),{},{entries:Number(t.entries)})),c.push("/home")}},[c]);var o=function(e){i({id:e.id,name:e.name,email:e.email,entries:Number(e.entries),joined:e.joined}),c.push("/home")},m=!!a.id;return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{className:"particles",params:V}),r.a.createElement(p,{isUserSignedIn:m,clearUser:function(){return i(z)}}),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(u.a,{to:m?"/home":"/signin"})),r.a.createElement(u.b,{path:"/signin",render:function(){return r.a.createElement(q,{loadUser:o})}}),r.a.createElement(u.b,{path:"/register",render:function(){return r.a.createElement($,{loadUser:o})}}),r.a.createElement(u.b,{path:"/home",render:function(){return m?r.a.createElement(_,{user:a,setUser:i}):r.a.createElement(u.a,{to:{pathname:"/signin"}})}}),r.a.createElement(u.b,{component:R})))};c.a.render(r.a.createElement(o.a,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c7b05978.chunk.js.map